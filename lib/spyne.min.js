!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("rxjs"),require("ramda")):"function"==typeof define&&define.amd?define("spyne",["rxjs","ramda"],e):"object"==typeof exports?exports.spyne=e(require("rxjs"),require("ramda")):t.spyne=e(t.Rx,t.R)}(window,function(t,e){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(e,n){e.exports=t},function(t,n){t.exports=e},,function(t,e,n){t.exports=n(5)},function(t,e,n){"use strict";n.r(e);var r=n(1),i=function(t){if(void 0!==t.constructor.name)return t.constructor.name;var e=t.toString();return r.defaultTo(String(e).substr(0,12),r.match(/^(function\s)(\w+)(\(.*)$/,e)[2])},o=function(t){var e={};for(var n in t)e[n]=t[n];return e},s=function t(e){return{map:function(n){return t(n(e))},fold:function(t,n){return n(e)},inspect:function(){return"right("+e+")"}}},a=function(t,e){return r.isNil(t)?e:t},c=function t(e){return{map:function(n){return t(e)},fold:function(t,n){return t(e)},inspect:function(){return"left("+e+")"}}},u=function(t,e){void 0===t&&(t=void 0),void 0===e&&(e=[]);e=r.concat(["length","name","prototype","constructor"],e);var n=r.compose(r.without(e),r.uniq),i=n(Object.getOwnPropertyNames(t.constructor.prototype)),o=n(function(t,e){return void 0===t&&(t=void 0),void 0===e&&(e=[]),Object.getOwnPropertyNames(t)}(t.constructor));return{methods:i,staticMethods:o,allMethods:r.concat(i,o)}},h=n(1),d=n(0),l=n(0),p=function(){return{includes:function(){return void 0!==window.Spyne?function(t){var e=[];return r.forEach(function(t,n,r){return e.push(n)},t),e}(window.Spyne.channels.map):["ROUTE","UI","WINDOW","DISPATCHER"]}}},f=["LOAD","RENDER","MOUNT","UNMOUNT","DISPOSE","GARBAGE_COLLECT","UPDATE"],v=["parent","self","child","children","view"],m=["Observable","BehaviorSubject","Subject","Observer","Subscriber","FromEventObservable"],b=["subscribe","combineLatest"],E=[],y=[],_=[],S=[],g=[],N=[];if(void 0!==h&&void 0!==d){E=[{error:"need to match a valid name within "+m,predicate:function(t){return p().includes(t.name)}},{error:"param 'observable' must contain a valid Observable",predicate:function(t){return function(t){return void 0!==t.subscribe}(t.observable)}},{error:"param action must be a registered action",predicate:function(t){return b.includes(t.action)}}],y=[{error:"needs cid number in srcElement",predicate:h.compose(h.is(String),h.path(["data","srcElement","cid"]))},{error:"needs a viewName in srcElement",predicate:h.compose(h.is(String),h.path(["data","srcElement","viewName"]))}],_=function(){return[].concat(E).concat(y)};var w=[{error:"need to match a valid name within "+m,predicate:function(t){return p().includes(t.name)}},{error:"needs one of the following step strings: "+f,predicate:function(t){return f.includes(t.STEP)}},{error:"type needs to one of the following: "+v,predicate:function(t){return v.includes(t.type)}},{error:"viewId needs to be added ",predicate:function(t){return void 0!==t.viewId}}];S=function(){return[].concat(w)},g=function(){return[{error:"DISPOSE STEP requires a disposeItem param in the data object",predicate:function(t){return"DISPOSE"===t.STEP&&void 0!==t.data.disposeItems}}].concat(w)},N=function(){var t=[{error:"UPDATE STEP requires a data object ",predicate:function(t){return"UPDATE"===t.STEP&&void 0!==t.data}}];return t.concat(w)},function(){return w.concat(E).concat(y)},function(){return[].concat(E).concat(y)},function(){var t=[{error:"param 'name' must be of a registered type",predicate:function(t){return p().includes(t.name)}},{error:"param 'observable' must contain a valid Observable",predicate:function(t){return m.includes(function(t){return t().constructor.name}(t.observable))}},{error:"param action must be a registered action",predicate:function(t){return b.includes(t.action)}}];return{streams:[{init:{name:"DISPATCHER",observable:function(){return new l},action:"subscribe"},structure:{type:String,observable:d||l,action:String},validations:t},{init:{name:"UBU",observable:function(){return new l},action:"subscribe"},structure:{type:String,observable:d||l,action:String},validations:t}]}}}var T=n(1),A=function(){function t(e,n,r,i,o){var s=e,a={channel:s,action:n,channelPayload:r,srcElement:i,event:o},c=window.Spyne.getChannelActions(s);return t.validateAction(n,s,c),"ROUTE"===s&&(a.location=t.getLocationData()),a}return t.validateAction=function(t,e,n){var r=T.contains(t,n);return!1===r&&void 0!==window.Spyne&&console.warn("warning: Action: '"+t+"' is not registered within the "+e+" channel!"),r},t.getLocationData=function(){return T.pickAll(["href","origin","protocol","host","hostname","port","pathname","search","hash"],window.location)},t.getStreamItem=function(){},t.getMouseEventKeys=function(){return["altKey","bubbles","cancelBubble","cancelable","clientX","clientY","composed","ctrlKey","currentTarget","defaultPrevented","detail","eventPhase","fromElement","isTrusted","layerX","layerY","metaKey","movementX","movementY","offsetX","offsetY","pageX","pageY","path","relatedTarget","returnValue","screenX","screenY","shiftKey","sourceCapabilities","srcElement","target","timeStamp","toElement","type","view","which","x","y"]},t}();function O(t){return t&&"object"==typeof t&&"[object RegExp]"!==Object.prototype.toString.call(t)&&"[object Date]"!==Object.prototype.toString.call(t)}function C(t,e){return e&&!0===e.clone&&O(t)?I(function(t){return Array.isArray(t)?[]:{}}(t),t,e):t}function D(t,e,n){var r=t.slice();return e.forEach(function(e,i){void 0===r[i]?r[i]=C(e,n):O(e)?r[i]=I(t[i],e,n):-1===t.indexOf(e)&&r.push(C(e,n))}),r}function I(t,e,n){var r=Array.isArray(e),i=(n||{arrayMerge:D}).arrayMerge||D;return r?Array.isArray(t)?i(t,e,n):C(e,n):function(t,e,n){var r={};return O(t)&&Object.keys(t).forEach(function(e){r[e]=C(t[e],n)}),Object.keys(e).forEach(function(i){O(e[i])&&t[i]?r[i]=I(t[i],e[i],n):r[i]=C(e[i],n)}),r}(t,e,n)}I.all=function(t,e){if(!Array.isArray(t)||t.length<2)throw new Error("first argument should be an array with at least two elements");return t.reduce(function(t,n){return I(t,n,e)})};var R=n(0),P=function(t,e){return(P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function L(t,e){function n(){this.constructor=t}P(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function M(t){return"function"==typeof t}var x=!1,V={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;x=t},get useDeprecatedSynchronousErrorHandling(){return x}};function H(t){setTimeout(function(){throw t})}var j={closed:!0,next:function(t){},error:function(t){if(V.useDeprecatedSynchronousErrorHandling)throw t;H(t)},complete:function(){}},F=Array.isArray||function(t){return t&&"number"==typeof t.length};function W(t){return null!=t&&"object"==typeof t}var k,$={e:{}};function U(){try{return k.apply(this,arguments)}catch(t){return $.e=t,$}}function G(t){return k=t,U}function B(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}B.prototype=Object.create(Error.prototype);var q=B,Y=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,r=this._parents,i=this._unsubscribe,o=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var s=-1,a=r?r.length:0;n;)n.remove(this),n=++s<a&&r[s]||null;if(M(i))G(i).call(this)===$&&(e=!0,t=t||($.e instanceof q?K($.e.errors):[$.e]));if(F(o))for(s=-1,a=o.length;++s<a;){var c=o[s];if(W(c))if(G(c.unsubscribe).call(c)===$){e=!0,t=t||[];var u=$.e;u instanceof q?t=t.concat(K(u.errors)):t.push(u)}}if(e)throw new q(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function K(t){return t.reduce(function(t,e){return t.concat(e instanceof q?e.errors:e)},[])}var Q="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("rxSubscriber"):"@@rxSubscriber",z=function(t){function e(e,n,r){var i=t.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,i._parentSubscription=null,arguments.length){case 0:i.destination=j;break;case 1:if(!e){i.destination=j;break}if("object"==typeof e){if(function(t){return t instanceof z||"_addParentTeardownLogic"in t&&t[Q]}(e)){var o=e[Q]();i.syncErrorThrowable=o.syncErrorThrowable,i.destination=o,o._addParentTeardownLogic(i)}else i.syncErrorThrowable=!0,i.destination=new J(i,e);break}default:i.syncErrorThrowable=!0,i.destination=new J(i,e,n,r)}return i}return L(e,t),e.prototype[Q]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t),this._unsubscribeParentSubscription())},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete(),this._unsubscribeParentSubscription())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._addParentTeardownLogic=function(t){t!==this&&(this._parentSubscription=this.add(t))},e.prototype._unsubscribeParentSubscription=function(){null!==this._parentSubscription&&this._parentSubscription.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this._parentSubscription=null,this},e}(Y),J=function(t){function e(e,n,r,i){var o,s=t.call(this)||this;s._parentSubscriber=e;var a=s;return M(n)?o=n:n&&(o=n.next,r=n.error,i=n.complete,n!==j&&(M((a=Object.create(n)).unsubscribe)&&s.add(a.unsubscribe.bind(a)),a.unsubscribe=s.unsubscribe.bind(s))),s._context=a,s._next=o,s._error=r,s._complete=i,s}return L(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;V.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=V.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):H(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;H(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};V.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),V.useDeprecatedSynchronousErrorHandling)throw t;H(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!V.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return V.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(H(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(z);function X(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new Z(t,e))}}var Z=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new tt(t,this.project,this.thisArg))},t}(),tt=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return L(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(z);function et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var nt=n(1),rt=function(){function t(t){var e=this;void 0===t&&(t={}),this.addMixins(),this.addRegisteredActions.bind(this),this.createChannelActionsObj();var n=new R.Subject;this.props=I({name:"observer"},t),this.createChannelActionMethods(),this.observer$=this.props.observer=n,this.streamsController=window.Spyne.channels,this.streamsController.getStream("DISPATCHER").subscribe(function(t){return e.onReceivedObservable(t)})}var e=t.prototype;return e.onStreamInitialized=function(){},e.initializeStream=function(){this.onStreamInitialized()},e.setTrace=function(t){},e.createChannelActionsObj=function(){var t=nt.ifElse(nt.is(String),nt.identity,nt.head),e=nt.map(t,this.addRegisteredActions()),n=nt.mergeAll(nt.chain(function(t){return nt.objOf(t,t)},e));this.channelActions=n},e.createChannelActionMethods=function(){var t=this,e=nt.ifElse(nt.is(String),nt.identity,nt.head),n=nt.ifElse(nt.is(String),nt.always("onIncomingObserverableData"),function(e){var n=nt.view(nt.lensIndex(1),e);return!0==("function"==typeof t[n])?t[n].bind(t):console.warn('"'+t.props.name+'", REQUIRES THE FOLLOWING METHOD '+n+" FOR ACTION, "+e[0]),n});this.channelActionMethods=nt.fromPairs(nt.map(function(t){return[e(t),n(t)]},this.addRegisteredActions()))},e.addRegisteredActions=function(){return[]},e.onReceivedObservable=function(t){t.action;this.onIncomingObservable(t)},e.getActionMethodForObservable=function(t){var e=this.onIncomingObserverableData.bind(this),n=nt.path(["data","action"],t),r=nt.prop(n,this.channelActionMethods),i=e;void 0!==r&&"onIncomingObserverableData"!==r&&(!0===("function"==typeof this[r])&&(i=this[r],console.log("METHOD EXISTS ",r,i)));return i},e.onIncomingObservable=function(t){var e=this,n=function(e){return{observableData:t.data,observableEvent:e}};return!0===nt.equals(t.name,this.props.name)?function(t){return t.observable.pipe(X(n)).subscribe(e.getActionMethodForObservable(t))}(t):void 0},e.onIncomingObserverableData=function(t){},e.sendStreamItem=function(t,e,n,r,i){void 0===i&&(i=this.observer$);var o=new A(this.props.name,t,e,n,r);i.next(o)},e.getChannel=function(t){var e=this;return nt.ifElse(function(t){return p().includes(t)},function(t){return e.streamsController.getStream(t).observer},function(t){return console.warn("channel name "+t+" is not within "+p)})(t)},e.addMixins=function(){},function(t,e,n){e&&et(t.prototype,e),n&&et(t,n)}(t,[{key:"observer",get:function(){return this.observer$}}]),t}(),it=n(1),ot=function(){function t(){this.checkIfObjIsNotEmptyOrNil=t.checkIfObjIsNotEmptyOrNil.bind(this)}return t.checkIfObjIsNotEmptyOrNil=function(t){var e=it.compose(it.complement(it.isEmpty),it.head,it.values),n=it.compose(it.complement(it.isNil),it.head,it.values);return it.allPass([e,n])(t)},t.checkIfParamValueMatchesRegex=function(t,e){var n=it.reject(it.equals("keyword")),r=it.compose(n,it.keys),i=it.compose(it.find(function(e){return it.test(new RegExp(e),t)}),r)(e);return it.is(String,i)&&(e=it.assoc(t,it.prop(i,e),e)),e},t.getLocationStrByType=function(t,e){void 0===e&&(e=!1);var n={slash:"pathname",query:"search",hash:"hash"}[!0===e?"hash":t];return it.prop(n,window.location).replace(/^(\/)?(#)?(\/)?(.*)$/,"$4")},t.createRouteArrayFromParams=function(t,e,n,r){var i=this;void 0===n&&(n="slash");var o=[];return function e(n){var s={},a=n.keyword,c=void 0!==t[a]?t[a]:it.prop(a,r),u=typeof n[c];"string"===u?c=n[c]:"undefined"===u&&(n=i.checkIfParamValueMatchesRegex(c,n)),s[a]=c,i.checkIfObjIsNotEmptyOrNil(s)&&o.push(s);var h=it.is(Object,n),d=it.has(c,n),l=it.has("route",n);if(!0===(d&&h)){var p=n[c];it.has("route",p)&&e(p.route)}else!0===l&&void 0!==c&&e(n.route)}(e),o},t.createSlashString=function(t){var e=it.reject(it.isNil),n=it.when(it.complement(it.isNil,it.__),it.join("/"));return it.compose(n,e,it.flatten,it.map(it.values))(t)},t.createQueryString=function(t){var e=it.reject(it.isNil),n=this.checkIfObjIsNotEmptyOrNil,r=it.compose(it.join("="),it.flatten,it.toPairs),i=it.ifElse(n,r,it.always(void 0)),o=it.map(i),s=it.when(it.complement(it.isEmpty),it.concat("?"));return it.compose(s,it.join("&"),e,o)(t)},t.convertParamsToRoute=function(t,e,n,r){void 0===e&&(e=window.Spyne.config.channels.ROUTE);var i=void 0!==n?n:e.type,o=e.isHash,s=e.routes.route,a=void 0!==r?r:this.getLocationStrByType(i,o),c=this.convertRouteToParams(a,e,i).keywords,u=this.createRouteArrayFromParams(t,s,i,c);return"query"===i?this.createQueryString(u):this.createSlashString(u)},t.checkIfValueShouldMapToParam=function(t,e){var n=it.invert(t),r=it.compose(it.is(String),it.head,it.defaultTo([]),it.prop(e)),i=it.compose(it.head,it.prop(e));return it.ifElse(r,i,it.always(e))(n)},t.createArrFromSlashStr=function(t){return t.replace(/^([/])?(.*)$/,"$2").split("/")},t.convertSlashRouteStrToParamsObj=function(t,e){var n=this,r=e,i=this.createArrFromSlashStr(e),o=[],s=[],a=t;it.reduce(function(t,e){var r=n.checkIfValueShouldMapToParam(a,e);void 0!==(a=n.checkIfParamValueMatchesRegex(e,a))&&(o.push(a.keyword),s.push(r));var i=[e,"route"],c=it.path(i,a),u=it.path(["route"],a);void 0!==c?a=c:void 0!==u&&(a=u)},0,i);var c=it.zipObj(o,s),u=this.getLastArrVal(o);return{routeKeywordsArr:o,routeKeyword:u,keywords:c,routeValue:r}},t.getLastArrVal=function(t){return function(t){return void 0!==it.last(t)?it.last(t):""}(t)},t.createDefaultParamFromEmptyStr=function(t,e){var n={};return n[t.keyword]=this.checkIfValueShouldMapToParam(t,e),n},t.convertQueryStrToParams=function(t,e){var n=e,r=e.replace(/^([?])?(.*)$/,"$2"),i=it.compose(it.map(it.split("=")),it.split("&"))(r),o=it.fromPairs(i),s=it.map(it.head,i);return!0===it.isEmpty(e)&&(o=this.createDefaultParamFromEmptyStr(t,e),s=it.keys(o)),{routeKeywordsArr:s,routeKeyword:this.getLastArrVal(s),keywords:o,routeValue:n}},t.convertRouteToParams=function(t,e,n){if(void 0===e)return{};var r=void 0!==n?n:e.type,i=e.routes.route;return"query"===r?this.convertQueryStrToParams(i,t):this.convertSlashRouteStrToParamsObj(i,t)},t}(),st=n(1),at=function(){function t(){this.createPopStateStream=t.createPopStateStream.bind(this)}return t.createPopStateStream=function(t){Object(R.fromEventPattern)(function(t){window.onpopstate=t},function(){window.onpopstate=function(){}}).subscribe(t)},t.getLastArrVal=function(t){return function(t){return void 0!==st.last(t)?st.last(t):""}(t)},t.getRouteArrData=function(e,n){var r=st.filter(st.contains(st.__,e),n);return{routeKeywordsArr:r,routeKeyword:t.getLastArrVal(r)}},t.flattenConfigObject=function(t){return st.values(st.fromPairs(function t(e){return st.chain(function(e){var n=e[0],r=e[1];return"[object Object]"===Object.prototype.toString.call(r)?st.map(function(t){var e=t[0],r=t[1];return[n+"."+e,r]},t(r)):[[n,r]]},st.toPairs(e))}(t)))},t.getLocationData=function(){return st.pickAll(["href","origin","protocol","host","hostname","port","pathname","search","hash"],window.location)},t}();var ct=n(1),ut=function(t){function e(){var e;return(e=t.call(this)||this).createChannelActionsObj(),e.props.name="ROUTE",e.routeConfigJson=e.getRouteConfig(),e.bindStaticMethods(),e.navToStream$=new R.BehaviorSubject,e.observer$=e.navToStream$.pipe(X(function(t){return e.onMapNext(t)})),e}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.initializeStream=function(){this.initStream()},n.createChannelActionsObj=function(){var t=this.addRegisteredActions(),e=ct.mergeAll(ct.chain(function(t){return ct.objOf(t,t)},t));this.channelActions=e},n.addRegisteredActions=function(){return["CHANNEL_ROUTE_DEEPLINK_EVENT","CHANNEL_ROUTE_CHANGE_EVENT"]},n.getRouteConfig=function(){var t=window.Spyne.config,e=ct.path(["channels","ROUTE"],t);"query"===e.type&&(e.isHash=!1);var n=at.flattenConfigObject(e.routes);return e.paramsArr=n,e},n.initStream=function(){this.firstLoadStream$=new R.BehaviorSubject(this.onIncomingDomEvent(void 0,this.routeConfigJson,"CHANNEL_ROUTE_DEEPLINK_EVENT")),at.createPopStateStream(this.onIncomingDomEvent.bind(this)),this.observer$=Object(R.merge)(this.firstLoadStream$,this.navToStream$)},n.onMapNext=function(t,e){return void 0===e&&(e=!1),t.action="CHANNEL_ROUTE_CHANGE_EVENT",t},e.onIncomingDomEvent=function(t,e,n){void 0===e&&(e=this.routeConfigJson);var r=void 0!==n?n:this.channelActions.CHANNEL_ROUTE_CHANGE_EVENT,i=this.getDataFromString(e);this.sendStreamItem(r,i,void 0,void 0,this.navToStream$)},n.onIncomingObserverableData=function(t){var e=this.channelActions.CHANNEL_ROUTE_CHANGE_EVENT,n=this.getDataFromParams(t),r=ct.path(["observableData","srcElement"],t),i=t.observableEvent,o=!n.isHidden;this.sendRouteStream(n,o),this.sendStreamItem(e,n,r,i,this.navToStream$)},n.sendRouteStream=function(t,e){void 0===e&&(e=!0),!0===e&&this.setWindowLocation(t)},e.getRouteState=function(t){return"CHANNEL_ROUTE_CHANGE_EVENT"},e.getIsDeepLinkBool=function(){return 0===this._routeCount},e.getRouteCount=function(){return void 0===this._routeCount?(this._routeCount=0,this._routeCount):(this._routeCount+=1,this._routeCount)},e.getExtraPayloadParams=function(t){return void 0===t&&(t=this.routeConfigJson),{routeCount:this.getRouteCount(),isDeepLink:this.getIsDeepLinkBool(),isHash:t.isHash,isHidden:t.isHidden,routeType:t.type}},e.getDataFromParams=function(t,e){void 0===e&&(e=this.routeConfigJson);var n=ct.path(["observableData","payload"],t),r=this.getRouteStrFromParams(n,e),i=this.getDataFromLocationStr(),o=i.routeKeyword,s=i.routeKeywordsArr;n=ct.merge(i.keywords,n);var a=this.getExtraPayloadParams(e),c=a.routeCount;return{isDeepLink:a.isDeepLink,routeCount:c,routeKeyword:o,routeKeywordsArr:s,keywords:n,routeValue:r,isHash:a.isHash,isHidden:a.isHidden,routeType:a.routeType}},e.getDataFromString=function(t,n){void 0===t&&(t=this.routeConfigJson);var r=t.type,i=!0===t.isHash,o=ot.getLocationStrByType(r,i),s=e.getParamsFromRouteStr(o,t,r),a=s.routeKeywordsArr,c=s.routeKeyword,u=s.keywords,h=s.routeValue,d=this.getExtraPayloadParams(t),l=d.routeCount,p=d.isDeepLink,f=d.isHash,v=d.routeType;return{isDeepLink:p,routeCount:l,routeKeyword:c,routeKeywordsArr:a,keywords:u,routeValue:h,isHash:f,isHidden:d.isHidden,routeType:v}},e.getDataFromLocationStr=function(t){void 0===t&&(t="slash");var e=void 0!==this.routeConfigJson?this.routeConfigJson.type:t,n=ot.getLocationStrByType(e),r=this.getParamsFromRouteStr(n,this.routeConfigJson,e);return{routeKeywordsArr:r.routeKeywordsArr,routeKeyword:r.routeKeyword,keywords:r.keywords,routeValue:r.routeValue,action:this.getRouteState()}},e.getLocationData=function(){return ct.pickAll(["href","origin","protocol","host","hostname","port","pathname","search","hash"],window.location)},e.getRouteStrFromParams=function(t,e,n){var r=void 0!==n?n:e.type;return ot.convertParamsToRoute(t,e,r)},e.getParamsFromRouteStr=function(t,e,n){var r=void 0!==n?n:e.type;return ot.convertRouteToParams(t,e,r)},n.checkEmptyRouteStr=function(t,e){void 0===e&&(e=!1);var n=ct.isEmpty(t);return!0===(!0===n&&!1===e)||!0===(!0===n&&!0===e)?"/":!0===(!1===n&&!0===e)?ct.concat("#",t):t},e.removeLastSlash=function(t){return t.replace(/^(.*)(\/)$/,"$1")},n.setWindowLocation=function(t){var n=t.isHash,r=t.routeValue;if(r=this.checkEmptyRouteStr(r,n),!0===n){r=e.removeLastSlash(window.location.pathname)+r,window.history.pushState({},"",r)}else{var i=ct.when(ct.compose(ct.complement(ct.equals("/")),ct.head),ct.concat("/",ct.__));window.history.pushState({},"",i(r))}},n.getWindowLocation=function(){return window.location.pathname},n.bindStaticMethods=function(){this.getIsDeepLinkBool=e.getIsDeepLinkBool.bind(this),this.getDataFromLocationStr=e.getDataFromLocationStr.bind(this),this.onIncomingDomEvent=e.onIncomingDomEvent.bind(this),this.getDataFromString=e.getDataFromString.bind(this),this.getParamsFromRouteStr=e.getParamsFromRouteStr.bind(this),this.getLocationData=e.getLocationData.bind(this),this.getRouteState=e.getRouteState.bind(this),this.getDataFromParams=e.getDataFromParams.bind(this),this.getRouteCount=e.getRouteCount.bind(this),this.getExtraPayloadParams=e.getExtraPayloadParams.bind(this);var t=ct.curryN(3,e.getRouteStrFromParams);this.getRouteStrFromParams=t(ct.__,this.routeConfigJson,this.routeConfigJson.type)},e}(rt);var ht=n(1),dt=function(t){function e(){var e;return(e=t.call(this)||this).props.name="UI",e.keyEventsLoaded=!1,e.keyCodeArr=[],e}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.addRegisteredActions=function(){return["CHANNEL_UI_EVENT","CHANNEL_UI_BLUR_EVENT","CHANNEL_UI_CLICK_EVENT","CHANNEL_UI_CHANGE_EVENT","CHANNEL_UI_CHANGE_EVENT","CHANNEL_UI_DBLCLICK_EVENT","CHANNEL_UI_FOCUS_EVENT","CHANNEL_UI_FOCUSIN_EVENT","CHANNEL_UI_FOCUSOUT_EVENT","CHANNEL_UI_INPUT_EVENT","CHANNEL_UI_KEYDOWN_EVENT","CHANNEL_UI_KEYPRESS_EVENT","CHANNEL_UI_KEYUP_EVENT","CHANNEL_UI_MOUSEDOWN_EVENT","CHANNEL_UI_MOUSEENTER_EVENT","CHANNEL_UI_MOUSELEAVE_EVENT","CHANNEL_UI_MOUSEMOVE_EVENT","CHANNEL_UI_MOUSEOUT_EVENT","CHANNEL_UI_MOUSEOVER_EVENT","CHANNEL_UI_MOUSEUP_EVENT","CHANNEL_UI_SELECT_EVENT"]},n.loadKeyStream=function(){var t=this,e=R.Observable.fromEvent(document,"keyup");this.keyPresses$=e.groupBy(function(t){return t.keyCode}).mergeAll().filter(function(e){return t.keyCodeArr.indexOf(e.keyCode)>=0}).repeat().subscribe(this.onKeyPressed.bind(this))},n.addKeyEvent=function(t){!1===this.keyEventsLoaded&&this.loadKeyStream(),this.keyEventsLoaded=!0,this.registerKey(t)},n.registerKey=function(t){this.keyCodeArr.push(t)},n.onKeyPressed=function(t){console.log("key is ",t)},n.onIncomingObservable=function(t){var e=this,n=function(e){return{observableData:t.data,uiEvent:e}};return!0===ht.equals(t.name,this.props.name)?function(t){return t.observable.pipe(X(n)).subscribe(e.onUIEvent.bind(e))}(t):void 0},n.getActionState=function(t){var e=ht.path(["uiEvent","type"]),n=ht.path(["uiEvent","typeOverRide"]),r=ht.compose(ht.toUpper,ht.either(n,e))(t);return void 0!==r?"CHANNEL_UI_"+r+"_EVENT":"CHANNEL_UI"},n.onUIEvent=function(t){t.action=this.getActionState(t);var e=t.action,n=t.observableData,r=n.payload,i=n.srcElement,o=t.uiEvent;this.sendStreamItem(e,r,i,o)},e}(rt),lt=n(1),pt=function(){function t(){this.createDomObservableFromEvent=t.createDomObservableFromEvent.bind(this)}return t.createDomObservableFromEvent=function(t,e,n){void 0===n&&(n=!0);return e=void 0===e?function(t){return t}:e,Object(R.fromEventPattern)(function(e){return window.addEventListener(t,e,{passive:n})},function(){window[t]=function(t){return t}}).pipe(X(e))},t.createMediaQuery=function(t){var e=window.matchMedia(t);return this.checkIfValidMediaQuery(e,t),e},t.checkIfValidMediaQuery=function(t,e){var n=function(t){return t.replace(/\s+/gm,"")},r="MediaQueryList"===t.constructor.name&&n(t.media)===n(e);return!1===r&&function(e){console.warn('Spyne Warning: the following query string, "'+e+'", does not match "'+t.media+'" and may not be a valid Media Query item!')}(e),r},t.createMediaQueryHandler=function(t,e){var n=function(t){return function(e){return e.mediaQueryName=t,e}}(e),r=function(t){return{addHandler:function(e){t.onchange=e},removeHandler:function(e){t.onchange=function(){}}}}(t);return new R.fromEventPattern(r.addHandler,r.removeHandler).pipe(X(n))},t.createMergedObsFromObj=function(e){var n=e.mediqQueries,r=[];return lt.mapObjIndexed(function(e,n,i){var o=t.createMediaQuery(e);r.push(t.createMediaQueryHandler(o,n))},n),r},t}(),ft=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return L(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){return t.call(this)||this}return L(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(Y)),vt=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=function(){return Date.now()},t}(),mt=new(function(t){function e(n,r){void 0===r&&(r=vt.now);var i=t.call(this,n,function(){return e.delegate&&e.delegate!==i?e.delegate.now():r()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return L(e,t),e.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,i):t.prototype.schedule.call(this,n,r,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(vt))(ft);function bt(t,e){return void 0===e&&(e=mt),function(n){return n.lift(new Et(t,e))}}var Et=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new yt(t,this.dueTime,this.scheduler))},t}(),yt=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.dueTime=n,i.scheduler=r,i.debouncedSubscription=null,i.lastValue=null,i.hasValue=!1,i}return L(e,t),e.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(_t,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}},e.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},e}(z);function _t(t){t.debouncedNext()}var St=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new gt(t,this.predicate))},t}(),gt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.predicate=n,r.skipping=!0,r.index=0,r}return L(e,t),e.prototype._next=function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)},e.prototype.tryCallPredicate=function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(t){this.destination.error(t)}},e}(z);var Nt=n(1),wt=function(t){function e(){var e;return(e=t.call(this)||this).bindStaticMethods(),e.observer$=new R.Subject,e.props.name="WINDOW",e}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.initializeStream=function(){var t=this;this.domChannelConfig=window.Spyne.config.channels.WINDOW,this.currentScrollY=window.scrollY;var e=this.getActiveObservables();R.merge.apply(void 0,e).subscribe(function(e){var n=e.action,r=e.channelPayload,i=e.srcElement,o=e.event;t.sendStreamItem(n,r,i,o)})},e.getScrollMapFn=function(t){var e=this.channelActions.CHANNEL_WINDOW_SCROLL_EVENT,n=window.scrollY,r=this.currentScrollY-n,i=r>=0?"up":"down";return this.currentScrollY=n,{action:e,channelPayload:{scrollY:n,scrollDistance:r,scrollDir:i},srcElement:t.srcElement,scrollDistance:r,event:t}},e.getMouseWheelMapFn=function(t){return{action:this.channelActions.CHANNEL_WINDOW_MOUSEWHEEL_EVENT,channelPayload:{scrollDir:t.deltaY<=0?"up":"down",deltaX:t.deltaX,deltaY:t.deltaY,deltaZ:t.deltaZ},srcElement:t.srcElement,event:t}},e.createCurriedGenericEvent=function(t){var n="CHANNEL_WINDOW_"+t.toUpperCase()+"_EVENT";return Nt.curry(e.mapGenericEvent)(n)},e.mapGenericEvent=function(t,e){return console.log("map generic event ",t),{action:t,channelPayload:e,srcElement:e.srcElement,event:e}},e.getResizeMapFn=function(t){return{action:this.channelActions.CHANNEL_WINDOW_RESIZE_EVENT,channelPayload:Nt.pick(["innerWidth","innerHeight","outerWidth","outerHeight"],window),srcElement:t.srcElement,event:t}},e.getOrientationMapFn=function(t){var e=this.channelActions.CHANNEL_WINDOW_ORIENTATION_EVENT,n=window.matchMedia("(orientation: portrait)").matches,r=Nt.pick(["innerWidth","innerHeight","outerWidth","outerHeight"],window);return r.orientation=!0===n?"portrait":"landscape",{action:e,channelPayload:r,srcElement:t.srcElement,event:t}},n.getMediaQueryMapFn=function(t){return{action:this.channelActions.CHANNEL_WINDOW_MEDIA_QUERY_EVENT,channelPayload:Nt.pick(["matches","media","mediaQueryName"],t),srcElement:t.srcElement,event:t}},n.createMouseWheelObservable=function(t){var n=t.debounceMSTimeForScroll;return pt.createDomObservableFromEvent("mousewheel",e.getMouseWheelMapFn.bind(this)).debounceTime(n)},n.createScrollObservable=function(t){var n=t.debounceMSTimeForScroll;return pt.createDomObservableFromEvent("scroll",e.getScrollMapFn.bind(this)).pipe(bt(n),function(t){return function(e){return e.lift(new St(t))}}(function(t){return 0===t.scrollDistance}))},n.createOrientationObservable=function(t){return pt.createDomObservableFromEvent("orientationchange",e.getOrientationMapFn.bind(this))},n.createResizeObservable=function(t){var n=t.debounceMSTimeForResize;return pt.createDomObservableFromEvent("resize",e.getResizeMapFn.bind(this)).pipe(bt(n))},n.getEventsFromConfig=function(t){void 0===t&&(t=this.domChannelConfig);var n=t.events;return Nt.map(function(t){var n=e.createCurriedGenericEvent(t);return pt.createDomObservableFromEvent(t,n)},n)},n.getActiveObservables=function(t){void 0===t&&(t=this.domChannelConfig);var e=[];t.listenForMediaQueries=function(t){var e=r.compose(r.complement(r.isEmpty),r.head,r.values),n=r.compose(r.complement(r.isNil),r.head,r.values);return r.allPass([e,n])(t)}(t.mediqQueries);var n={listenForResize:this.createResizeObservable.bind(this),listenForOrientation:this.createOrientationObservable.bind(this),listenForScroll:this.createScrollObservable.bind(this),listenForMouseWheel:this.createMouseWheelObservable.bind(this)};Nt.mapObjIndexed(function(n,r,i){t[r]&&e.push(n(t))},n),this.checkForMediaQueries(t.listenForMediaQueries);var i=this.getEventsFromConfig(t);return e=e.concat(i)},n.checkForMediaQueries=function(t){var e=this;!0===t&&this.getMediaQueryObservable(this.domChannelConfig).subscribe(function(t){var n=t.action,r=t.channelPayload,i=t.srcElement,o=t.event;e.sendStreamItem(n,r,i,o,e.observer$)})},n.getMediaQueryObservable=function(t){var e=this.createMergedObsFromObj(t);return Object(R.merge)(e[0],e[1]).pipe(X(this.getMediaQueryMapFn.bind(this)))},n.addRegisteredActions=function(){return["CHANNEL_WINDOW_SCROLL_EVENT","CHANNEL_WINDOW_MOUSEWHEEL_EVENT","CHANNEL_WINDOW_MEDIA_QUERY_EVENT","CHANNEL_WINDOW_RESIZE_EVENT","CHANNEL_WINDOW_ORIENTATION_EVENT","CHANNEL_WINDOW_CACHED_EVENT","CHANNEL_WINDOW_ERROR_EVENT","CHANNEL_WINDOW_ABORT_EVENT","CHANNEL_WINDOW_LOAD_EVENT","CHANNEL_WINDOW_BEFOREUNLOAD_EVENT","CHANNEL_WINDOW_UNLOAD_EVENT","CHANNEL_WINDOW_ONLINE_EVENT","CHANNEL_WINDOW_OFFLINE_EVENT","CHANNEL_WINDOW_FOCUS_EVENT","CHANNEL_WINDOW_BLUR_EVENT","CHANNEL_WINDOW_OPEN_EVENT","CHANNEL_WINDOW_MESSAGE_EVENT","CHANNEL_WINDOW_ERROR_EVENT","CHANNEL_WINDOW_CLOSE_EVENT","CHANNEL_WINDOW_PAGEHIDE_EVENT","CHANNEL_WINDOW_PAGESHOW_EVENT","CHANNEL_WINDOW_POPSTATE_EVENT","CHANNEL_WINDOW_ANIMATIONSTART_EVENT","CHANNEL_WINDOW_ANIMATIONEND_EVENT","CHANNEL_WINDOW_ANIMATIONITERATION_EVENT","CHANNEL_WINDOW_TRANSITIONSTART_EVENT","CHANNEL_WINDOW_TRANSITIONCANCEL_EVENT","CHANNEL_WINDOW_TRANSITIONEND_EVENT","CHANNEL_WINDOW_TRANSITIONRUN_EVENT","CHANNEL_WINDOW_RESET_EVENT","CHANNEL_WINDOW_SUBMIT_EVENT","CHANNEL_WINDOW_BEFOREPRINT_EVENT","CHANNEL_WINDOW_AFTERPRINT_EVENT","CHANNEL_WINDOW_COMPOSITIONSTART_EVENT","CHANNEL_WINDOW_COMPOSITIONUPDATE_EVENT","CHANNEL_WINDOW_COMPOSITIONEND_EVENT","CHANNEL_WINDOW_FULLSCREENCHANGE_EVENT","CHANNEL_WINDOW_FULLSCREENERROR_EVENT","CHANNEL_WINDOW_CUT_EVENT","CHANNEL_WINDOW_WHEEL_EVENT","CHANNEL_WINDOW_COPY_EVENT"]},n.bindStaticMethods=function(){this.createMediaQueryHandler=pt.createMediaQueryHandler.bind(this),this.createMergedObsFromObj=pt.createMergedObsFromObj.bind(this)},e}(rt),Tt=n(3),At=n.n(Tt),Ot=n(1),Ct=At.a.Success,Dt=At.a.Failure,It=function(){};void 0!==Ot&&(It=Ot.curry(function(t,e){var n=Ct(Ot.curryN(Ot.length(t),Ot.always(e)));return Ot.reduce(function(t,n){return t.ap(n.predicate(e)?Ct(e):Dt([n.error]))},n,t)}));var Rt=function(){function t(t){this.addMixins(),this.map=new Map,this.map.set("DISPATCHER",new R.Subject)}var e=t.prototype;return e.init=function(){this.createMainStreams()},e.createObserver=function(t){It(t.validations,t.init),this.map.set(t.init.name,t.init.observable())},e.createMainStreams=function(){this.routeValueeam=new ut,this.map.set("ROUTE",this.routeValueeam),this.uiStream=new dt,this.map.set("UI",this.uiStream),this.domStream=new wt,this.map.set("WINDOW",this.domStream),this.routeValueeam.initializeStream(),this.domStream.initializeStream()},e.addKeyEvent=function(t){this.map.get("UI").addKeyEvent(t)},e.registerStream=function(t,e){this.map.set(t,e),e.initializeStream()},e.getChannelActions=function(t){return this.map.get(t).addRegisteredActions()},e.getStream=function(t){if(void 0!==this.map.get(t))return this.map.get(t);console.warn('Spyne Warning: The Channel named "'+t+'" does not appear to be registered!')},e.addMixins=function(){},t}();function Pt(){return{createpropsMap:function(){var t=new WeakMap,e={cid:this.props.cid};return t.set(e,this.props),{key:e,weakMap:t}},gc:function(){for(var t in this)delete this[t]},createId:function(){return"cid-"+Math.floor(1e7*Math.random(1e7))},setTraceFunc:function(t){return!0===t?console.log:function(){}}}}var Lt=n(1),Mt=function(){function t(e,n){var r=this;this.template=this.formatTemplate(e),this.templateData=n;var i=t.getStringArray(this.template),o=this.template.match(t.findTmplLoopsRE());o=null===o?[]:o;var s=Lt.contains(Lt.__,o),a=Lt.ifElse(s,function(e,n){return e.replace(t.parseTmplLoopsRE(),r.parseTheTmplLoop.bind(r))},this.addParams.bind(this));this.finalArr=i.map(a)}t.getStringArray=function(e){var n=e.split(t.findTmplLoopsRE()),r=/^([\\n\s\W]+)$/;return Lt.reject(function(t){return t.match(r)},n)},t.findTmplLoopsRE=function(){return/({{#\w+}}[\w\n\s\W]+?{{\/\w+}})/gm},t.parseTmplLoopsRE=function(){return/({{#(\w+)}})([\w\n\s\W]+?)({{\/\2}})/gm},t.swapParamsForTagsRE=function(){return/({{)(.*?)(}})/gm};var e=t.prototype;return e.removeThis=function(){this.finalArr=void 0,this.templateData=void 0,this.template=void 0},e.getTemplateNode=function(){var t=this.finalArr.join(" "),e=document.createRange().createContextualFragment(t);return window.setTimeout(this.removeThis(),10),e},e.getTemplateString=function(){return this.finalArr.join(" ")},e.formatTemplate=function(t){return"string"==typeof t?t:t.text},e.addParams=function(e){var n=this;return e.replace(t.swapParamsForTagsRE(),function(t,e,r,i){var o=n.templateData[r];return Lt.defaultTo("")(o)})},e.parseTheTmplLoop=function(e,n,r,i){var o=i,s=this.templateData[r];return!0===Lt.isNil(s)||Lt.isEmpty(s)?"":s.map(function(e){return e="string"==typeof e?function(e,n){return n.replace(t.swapParamsForTagsRE(),e)}(e,o):function(e,n){return n.replace(t.swapParamsForTagsRE(),function(t,n,r){return e[r]})}(e,o)}).join(" ")},t}();function xt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Vt=n(1),Ht=function(){function t(t,e,n,r){void 0===t&&(t="div"),void 0===e&&(e={}),void 0===n&&(n=void 0),void 0===r&&(r=void 0),!0===Vt.is(String,e)&&(n=e,e={}),this.props=new Map,this.setProp("fragment",document.createDocumentFragment()),this.setProp("tagName",t),this.setProp("attrs",this.updateAttrs(e)),this.setProp("content",n),this.setProp("template",r),this.addMixins()}var e=t.prototype;return e.setProp=function(t,e){this.props.set(t,e)},e.getProp=function(t){return this.props.get(t)},e.setElAttrs=function(t,e){return this.getProp("attrs").forEach(function(e,n){"dataset"===n?Vt.forEachObjIndexed(function(e,n){t.dataset[n]=e},e):t.setAttribute(n,e)}),t},e.updateAttrs=function(t,e){var n=void 0!==e?e:new Map;return Vt.mapObjIndexed(function(t,e){return n.set(e,t)},t),n},e.addTemplate=function(t){var e=this,n=this.getProp("template");return void 0!==n?function(n){var r=e.getProp("content");r=Vt.is(Object,r)?r:{};var i=new Mt(n,r).getTemplateNode();return t.appendChild(i),t}(n):function(t){return t}(t)},e.createElement=function(t){return void 0===t&&(t="div"),document.createElement(t)},e.addContent=function(t){var e=this.getProp("content");if(!0===Vt.is(String,e)){var n=document.createTextNode(e);t.appendChild(n)}return t},e.execute=function(){var t=Vt.pipe(this.createElement.bind(this),this.setElAttrs.bind(this),this.addTemplate.bind(this),this.addContent.bind(this))(this.getProp("tagName"));this.props.set("el",t)},e.render=function(){return this.execute(),this.getProp("el")},e.returnIfDefined=function(t,e){if(void 0!==e){var n=void 0===e;t[e]=!1===n?e:I(t[va],e)}},e.updateprops=function(t){return this.returnIfDefined(this.props,t),this},e.updatepropsAndRun=function(t){return this.updateprops(t),this.execute(),this.getProp("fragment")},e.unmount=function(){void 0!==this.props&&(this.getProp("el").remove(),this.props.clear(),this.gc())},e.updateTag=function(t){void 0===t&&(t="div"),this.updateprops(t)},e.updateAttributes=function(t){void 0===t&&(t={}),this.updateprops(t)},e.updateTemplate=function(t){this.updateprops(t)},e.updateData=function(t){void 0===t&&(t={}),this.updateprops(t)},e.addTagAndRender=function(t){void 0===t&&(t="div"),this.updatepropsAndRun(t)},e.addAttrsibutesAndRender=function(t){void 0===t&&(t={}),this.updatepropsAndRun(t)},e.addTemplateAndRender=function(t){this.updatepropsAndRun(t)},e.addDataAndRender=function(t){void 0===t&&(t={}),this.updatepropsAndRun(t)},e.addMixins=function(){var t=Pt();this.gc=t.gc.bind(this)},function(t,e,n){e&&xt(t.prototype,e),n&&xt(t,n)}(t,[{key:"el",get:function(){return this.props.get("el")}}]),t}(),jt=function(t,e,n,r){return void 0===t&&(t=!1),void 0===e&&(e=1),void 0===n&&(n="ease"),void 0===r&&(r=!1),(!0===r?"opacity:0;":"")+"transition: opacity "+e+"s "+n+"; opacity: "+(!0===t?1:0)+";"};function Ft(t,e){return function(n){return n.lift(new Wt(t,e))}}var Wt=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new kt(t,this.predicate,this.thisArg))},t}(),kt=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return L(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(z),$t=n(1),Ut=function(){function t(e){this.props.observableStreams=t.createDirectionalObservables()}return t.createDirectionalFiltersObject=function(){return{P:["parent"],C:["child"],PCI:["parent","internal","child"],CI:["child","internal"],PI:["parent","internal"],PC:["parent","child"]}},t.addDefaultDir=function(t){return $t.flip($t.merge)({$dir:["internal"]},$t.clone(t))},t.addDownInternalDir=function(t,e){return void 0===e&&(e=["internal","down"]),$t.flip($t.merge)($t.clone(t),{$dir:e})},t.addChildAndInternalDir=function(t,e){return void 0===e&&(e=["child","down"]),$t.flip($t.merge)($t.clone(t),{$dir:e})},t.mapToDefaultDir=function(t){return this.addDefaultDir(t)},t.createDirectionalObservables=function(t,e,n){void 0===t&&(t=new R.Subject),void 0!==e&&void 0!==n&&(t.viewName=e,t.cid=n);var r=function(t){return $t.propSatisfies(function(e){return e.includes(t)},"$dir")},i=r("parent"),o=r("child"),s=r("internal"),a=function(t){return $t.merge({from$:t})},c=a("child"),u=a("internal"),h=a("parent"),d=t.pipe(Ft(function(t){return void 0!==t&&void 0!==t.action})),l=t.pipe(Ft(s),X(u)),p=t.pipe(Ft(i),X(c)),f=t.pipe(Ft(o),X(h)),v={parent:p,internal:l,child:f};return{raw$:d,toInternal$:l,toParent$:p,toChild$:f,completeAll:function(){$t.forEach(function(t){t.complete(),t.isStopped=!0},[d,l,p,f])},completeStream:function(t){void 0===t&&(t=[]);void 0!==t&&t.length>=1&&t.forEach(function(t){void 0!==v[t]&&function(t){t.complete(),t.isStopped=!0}(v[t])})}}},t}();function Gt(t,e,n){return(Gt=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&Bt(i,n.prototype),i}).apply(null,arguments)}function Bt(t,e){return(Bt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qt=n(1),Yt=function(){function t(t,e,n,r){var i=this;void 0===e&&(e={}),void 0===n&&(n=""),void 0===r&&(r="theName"),this.addMixins(),this._state="INIT",this.cid=n,this.vsName=r,this.defaults={debug:!1,extendedHashMethods:{}},this.options=I(this.defaults,e);this.addActionListeners().forEach(function(t){var e=t[0],n=t[1];i.options.extendedHashMethods[e]=function(t){return i[n](t)}}),this.options.hashMethods=this.setHashMethods(this.options.extendedHashMethods),this.sink$=t,this.sink$.subscribe(this.onSinkSubscribe.bind(this)),this.$dirs=Ut.createDirectionalFiltersObject(),this.addDefaultDir=Ut.addDefaultDir,this.sourceStreams=Ut.createDirectionalObservables(new R.Subject,this.vsName,this.cid),this._source$=this.sourceStreams.toInternal$}var e=t.prototype;return e.addActionListeners=function(){return[]},e.setHashMethods=function(t){var e=this;return void 0===t&&(t={}),I({GARBAGE_COLLECT:function(t){return e.onGarbageCollect(t)},READY_FOR_GC:function(t){return e.onReadyForGC(t)},DISPOSE:function(t){return e.onDispose(t)},RENDER:function(t){return e.onRender(t)},RENDER_AND_ATTACH_TO_PARENT:function(t){return e.onRenderAndAttachToParent(t)},RENDER_AND_ATTACH_TO_DOM:function(t){return e.onRenderAndAttachToDom(t)},ATTACH_CHILD_TO_SELF:function(t){return e.onAttachChildToSelf(t)}},t)},e.createDomItem=function(){this.props=void 0!==this.props?this.props:{};var t=qt.filter(function(t){return void 0!==t},qt.pick(["id","className"],this.props));return new Ht(this.props.tagName,t,this.props.data,this.props.template)},e.onDisposeCompleted=function(t){},e.animateInTween=function(t,e){!function(t,e){var n=1*window.getComputedStyle(t).opacity,r=jt(!0,e,"ease",1===n);t.style.cssText+=r}(t,e)},e.animateOutTween=function(t,e,n){!function(t,e,n){var r=jt(!1,e,"ease");t.style.cssText+=r,console.log(e," inline is ",r),t.addEventListener("transitionend",n,!1)}(t,e,n)},e.setAnimateIn=function(t){if(!0===t.animateIn){var e=void 0!==t.el?t.el:this.domItem.el;this.animateInTween(e,t.animateInTime)}},e.disposeMethodOld=function(t){var e=this,n=R.Observable.bindCallback(function(t,n){var r=void 0!==t.el.el?t.el.el:t.el;e.animateOutTween(r,t.animateOutTime,n)}),r=function(t){e._source$.next({action:"READY_FOR_GC",$dir:e.$dirs.I})};return(!0===t.animateOut?function(t){return n(t).subscribe(r),{action:"DISPOSING",$dir:e.$dirs.CI}}:function(){return{action:"DISPOSE_AND_READY_FOR_GC",$dir:e.$dirs.PCI}})(t)},e.disposeMethod=function(t){var e=this;return void 0!==t.animateOutClass?(function(){var n=void 0!==t.el.el?t.el.el:t.el,r={action:"READY_FOR_GC",$dir:e.$dirs.PI,el:n};t.el$.setClass(t.animateOutClass);R.Observable.fromEvent(n,"transitionend").filter(function(t){return t.target===n}).take(1).subscribe(function(){e._source$.next(r)})}(),{action:"DISPOSING",$dir:this.$dirs.CI}):{action:"DISPOSE_AND_READY_FOR_GC",$dir:e.$dirs.CI}},e.onDispose=function(t){return this.disposeMethod(t)},e.removeStream=function(){void 0!==this.sourceStreams&&this.sourceStreams.completeStream(["internal","child"])},e.onGarbageCollect9=function(t){var e="PageChildBox"===this.vsName?1e3:0;window.setTimeout(this.onGarbageCollectRun.bind(this),e)},e.onReadyForGC=function(t){this.removeStream()},e.onGarbageCollect=function(t){this.domItem.unmount(),void 0!==this.sourceStreams&&this.sourceStreams.completeStream(["parent"])},e.getSourceStream=function(){return this._source$},e.combineDomItems=function(t){var e=qt.isNil(t.query)?t.node:t.query;("appendChild"===t.attachType?function(t,e){return t.appendChild(e)}:function(t,e){return t.insertBefore(e,t.firstChild)})(e,this.domItem.render()),this.setAnimateIn(t)},e.onAttachChildToSelf=function(t){var e=t.childRenderData;return this.combineDomItems(e),{action:"CHILD_ATTACHED",$dir:this.$dirs.PI}},e.onRenderAndAttachToParent=function(t){return this.onRender(t),this.combineDomItems(t),{action:"RENDERED_AND_ATTACHED_TO_PARENT",el:this.domItem.el,$dir:this.$dirs.PI}},e.renderDomItem=function(t){return this.domItem=Gt(Ht,t),this.domItem},e.onRender=function(t){var e=this;return{action:"RENDERED",el:function(t){return e.renderDomItem(t)}(qt.props(["tagName","domAttributes","data","template"],t)),$dir:this.$dirs.I}},e.extendedMethods=function(t){},e.onRenderAndAttachToDom=function(t){var e=this;return t.attachData.el=function(t){return e.renderDomItem(t)}(qt.props(["tagName","domAttributes","data","template"],t)),this.combineDomItems(t.attachData),{action:"RENDERED_AND_ATTACHED_TO_DOM",el:t.attachData.el.el,$dir:this.$dirs.CI}},e.onSinkSubscribe=function(t){var e=this,n=t.action,r=qt.defaultTo(function(t){return e.extendedMethods(t)})(this.options.hashMethods[n])(t);void 0!==r&&function(t){e._source$.next(t)}(Object.freeze(r))},e.addMixins=function(){var t=Pt();this.createId=t.createId,this.createpropsMap=t.createpropsMap,this.convertDomStringMapToObj=o,this.ifNilThenUpdate=a},t}(),Kt=n(1);function Qt(){var t=this;setTimeout(function(){Kt.forEach(function(t){},t)},1)}n(1);var zt=function(){function t(t,e,n,r,i){void 0===r&&(r="subscribe"),void 0===i&&(i=!1),this.addMixins(),this.options={name:t,observable:e,data:n,action:r},this.getValidationChecks(t)}var e=t.prototype;return e.getValidationChecks=function(t){var e=this,n=window.Spyne.channels.map;return!0===n.has(t)?function(t){return e.onRunValidations(t)}(_):function(t){return console.warn(t)}("payload Needs a Valid Stream Name!")},e.onRunValidations=function(t){It(t(),this.options).fold(this.onError.bind(this),this.onSuccess.bind(this))},e.onPayloadValidated=function(t){this.sendToDirectorStream(t)},e.sendToDirectorStream=function(t){window.Spyne.channels.getStream("DISPATCHER").next(t),this.gc()},e.onError=function(t){console.warn("payload failed due to:\n"+t.map(function(t){return"* "+t}).join("\n")),this.gc()},e.onSuccess=function(t){this.onPayloadValidated(t)},e.addMixins=function(){this.gc=Qt},t}();function Jt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Xt=function(){function t(t,e,n,r,i,o){void 0===i&&(i={}),void 0===o&&(o=!0),this.addMixins(),this.options={name:t,STEP:e,type:n,viewId:r,data:i},this.getValidationChecks(e)}var e=t.prototype;return e.getValidationChecks=function(t){var e=this;return function(t,e,n){void 0===n&&(n=null);var r=t[e];return r?s(r):c(n)}({LOAD:S,RENDER:S,MOUNT:S,DISPOSE:g,UNMOUNT:S,GARBAGE_COLLECT:S,UPDATE:N},t,"lifestream payload Needs a Valid Stream Name!").fold(function(t){return console.warn(t)},function(t){return e.onRunValidations(t)})},e.onRunValidations=function(t){It(t(),this.options).fold(this.onError.bind(this),this.onSuccess.bind(this))},e.onPayloadValidated=function(t){return this._data=t,t},e.onError=function(t){console.error("payload failed due to:\n"+t.map(function(t){return"* "+t}).join("\n")),this.gc()},e.onSuccess=function(t){this.onPayloadValidated(t)},e.addMixins=function(){this.gc=Qt},function(t,e,n){e&&Jt(t.prototype,e),n&&Jt(t,n)}(t,[{key:"data",get:function(){return this._data}}]),t}(),Zt=n(1);function te(){return{testFunc:function(t){console.log("stream mixin is ",t)},sendRoutePayload:function(t,e){return new zt("ROUTE",t,e,"subscribe")},sendUIPayload:function(t,e){return new zt("UI",t,e,"subscribe")},sendChannelPayload:function(t,e){var n=this,r=function(t){return Zt.prop(t,n.props)},i={payload:e,channel:t,srcElement:{cid:r("cid"),el:r("el"),viewName:r("name")}};return new zt(t,new R.Observable.of(""),i,"subscribe")},sendLifeStreamPayload:function(t,e){return new zt("LIFESTREAM",t,e,"subscribe")},createLifeStreamPayload:function(t,e,n){void 0===e&&(e={}),void 0===n&&(n="parent");var r=this.props.name+": "+this.props.cid;return new Xt("LIFESTREAM",t,n,r,e).data}}}var ee=n(1),ne=function(){function t(t,e){this.context=t,this.enhancersMap=new Map,this.enhancersArr=e,this.initMap(),this.addAllEnhancerMethods()}var e=t.prototype;return e.initMap=function(){this.enhancersMap.set("ALL",[]);var t=u(this.context).allMethods;this.updateMap("LOCAL",t)},e.getEnhancersMap=function(){return this.enhancersMap},e.updateMap=function(t,e){var n=ee.concat(this.enhancersMap.get("ALL"),e);this.enhancersMap.set(t,e),this.enhancersMap.set("ALL",n)},e.getMethodsArr=function(t){return this.enhancersMap.get(t)},e.createEnhancerMethodsObj=function(t){var e=this,n=function(t){return console.error('Spyne Error: The following enhancer method, "'+t+'", already exists and cannot be added to the '+r.name+" Enhancer!")},r=new t(this.context),i=r.getEnhancerMethods(),o=function(t){var r=ee.contains(ee.__,e.getMethodsArr("ALL")),i=ee.filter(r,t);return i.forEach(n),i}(i.allMethods),s=ee.dropWhile(ee.contains(ee.__,o));return i=ee.map(s,i),this.updateMap(r.name,i.allMethods),i.enhancer=r,i.name=r.name,i},e.addAllEnhancerMethods=function(){var t=this;ee.forEach(function(e){var n=t.createEnhancerMethodsObj(e);n.enhancer.bindParentViewStream(n,t.context)},this.enhancersArr)},t}(),re=n(1),ie=function(){function t(t,e){this.addMixins(),this.props=t,this.broadcastFn=e,this.broadcaster(this.broadcastFn)}var e=t.prototype;return e.addDblClickEvt=function(t){var e=R.Observable.fromEvent(t,"click");return e.buffer(e.debounceTime(250)).filter(function(t){return 2===t.length}).map(function(t){var e=re.clone(t[0]);return e.typeOverRide="dblclick",e})},e.broadcast=function(t){var e,n=this,r={UI:this.sendUIPayload,ROUTE:this.sendRoutePayload},i=t[0],s=t[1],a=t[2],c=this.props.el.querySelectorAll(i);if(c.length<=0){var u=this.props.el,h=function(t){t===u&&(c=[t])};!function(){var t=u.parentElement.querySelectorAll(i);t.forEach=Array.prototype.forEach,t.forEach(h)}()}var d=void 0!==a;void 0===c||c.length<=0?console.warn("Spyne Warning: The item "+i+", does not appear to exist!"):(c.forEach=Array.prototype.forEach,c.forEach(function(t){var i="dblClick"!==s?Object(R.fromEvent)(t,s):n.addDblClickEvt(t);e=t.dataset.channel;var a={};a.payload=o(t.dataset),a.payload=re.omit(["channel"],a.payload),a.channel=e,a.srcElement={},a.srcElement.cid=n.props.id,a.srcElement.isLocalEvent=d,a.srcElement.viewName=n.props.name,a.srcElement.event=s,a.srcElement.el=t,(void 0!==e?r[e]:r.UI)(i,a)}))},e.broadcaster=function(t){var e=this;t().forEach(function(t){return e.broadcast(t)})},e.addMixins=function(){var t=te();this.sendUIPayload=t.sendUIPayload,this.sendRoutePayload=t.sendRoutePayload,this.createLifeStreamPayload=t.createLifeStreamPayload},t}();function oe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var se=n(1),ae=function(){function t(e,n){this.el=void 0!==n?e.querySelectorAll(n):e,this.queryStr=n,1===this.el.length?this.el=se.head(this.el):"NodeList"===this.el.constructor.name&&(this.el=t.createArrayFromNodeList(this.el)),this.cList=this.el.classList,this.elProps=new Map,this.createMethods()}t.createArrayFromNodeList=function(t){return se.reduce(function(t,e){return t.push(e),t},[],t)};var e=t.prototype;return e.createMethods=function(){this.addClass=this.mapToValue(function(t,e){void 0!==t&&void 0!==t.classList&&void 0!==e&&t.classList.add(e)}),this.removeClass=this.mapToValue(function(t,e){void 0!==t&&void 0!==t.classList&&void 0!==e&&t.classList.remove(e)}),this.setClass=this.mapToValue(function(t,e){return t.classList.value=e,t}),this.inlineCss=this.mapToValue(function(t,e){return t.style.cssText=e,t}),this.toggleClass=this.mapToValue(function(t,e,n){return void 0===n&&(n=!0),t.classList.toggle(e,n),t}),this.toggleEls=this.mapToValue(function(t,e,n){var r=t===n;return t.classList.toggle(e,r),t})},e.mapMethod=function(t){var e=this;return function(n){return e.elArr.map(t),e}},e.addAnimClass=function(t){var e=this,n=function(){return e.addClass(t)};return requestAnimationFrame(function(){setTimeout(n,0)}),this},e.mapToValue=function(t){var e=this;return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return e.elArr.map(function(e){return t.apply(void 0,[e,n].concat(i))}),e}},e.setClassOnBool=function(t,e){return void 0===t&&(t=""),void 0===e&&(e=!0),e?this.addClass(t):this.removeClass(t),this},e.setActiveItem=function(t,e){var n=document.querySelector(this.queryStr+t),r=se.ifElse(function(t){return t===n},function(t){void 0!==t&&t.classList.add(e)},function(t){void 0!==t&&t.classList.remove(e)});this.elArr.map(r)},e.query=function(e){if(null!==this.el.querySelector(e))return new t(this.el,e);var n=this.el.getAttribute("id");console.warn('Spyne Warning: the element, "'+e+'" does not exist in this element, "'+n+'"!')},e.getEl=function(){return this.el},e.unmount=function(){this.el=void 0,this.cList=void 0,this.inline=void 0},function(t,e,n){e&&oe(t.prototype,e),n&&oe(t,n)}(t,[{key:"elArr",get:function(){return"NodeList"===this.el.constructor.name?t.createArrayFromNodeList(this.el):[].concat(this.el)}}]),t}();function ce(t){return function(e){return e.lift(new ue(t))}}var ue=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new he(t,this.predicate))},t}(),he=function(t){function e(e,n){var r=t.call(this,e)||this;return r.predicate=n,r.index=0,r}return L(e,t),e.prototype._next=function(t){var e,n=this.destination;try{e=this.predicate(t,this.index++)}catch(t){return void n.error(t)}this.nextOrComplete(t,e)},e.prototype.nextOrComplete=function(t,e){var n=this.destination;Boolean(e)?n.next(t):n.complete()},e}(z);function de(){}var le=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new pe(t,this.nextOrObserver,this.error,this.complete))},t}(),pe=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o._tapNext=de,o._tapError=de,o._tapComplete=de,o._tapError=r||de,o._tapComplete=i||de,M(n)?(o._context=o,o._tapNext=n):n&&(o._context=n,o._tapNext=n.next||de,o._tapError=n.error||de,o._tapComplete=n.complete||de),o}return L(e,t),e.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},e.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},e}(z);function fe(t){return function(e){return e.lift(new ve(t))}}var ve=function(){function t(t){this.callback=t}return t.prototype.call=function(t,e){return e.subscribe(new me(t,this.callback))},t}(),me=function(t){function e(e,n){var r=t.call(this,e)||this;return r.add(new Y(n)),r}return L(e,t),e}(z),be=function(t){function e(e,n,r){var i=t.call(this)||this;return i.parent=e,i.outerValue=n,i.outerIndex=r,i.index=0,i}return L(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(z);var Ee="function"==typeof Symbol&&Symbol.observable||"@@observable";function ye(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:de}var _e=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,i=function(t,e,n){if(t){if(t instanceof z)return t;if(t[Q])return t[Q]()}return t||e||n?new z(t,e,n):new z(j)}(t,e,n);if(r?r.call(i,this.source):i._addParentTeardownLogic(this.source||V.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),V.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){V.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=Se(e))(function(e,r){var i;i=n.subscribe(function(e){try{t(e)}catch(t){r(t),i&&i.unsubscribe()}},r,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[Ee]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:ye(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=Se(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}();function Se(t){if(t||(t=V.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var ge=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()}},Ne=function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,H),e}};var we=function(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),Te=function(t){return function(e){for(var n=t[we]();;){var r=n.next();if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add(function(){n.return&&n.return()}),e}},Ae=function(t){return function(e){var n=t[Ee]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}},Oe=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function Ce(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var De=function(t){if(t instanceof _e)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[Ee])return Ae(t);if(Oe(t))return ge(t);if(Ce(t))return Ne(t);if(t&&"function"==typeof t[we])return Te(t);var e=W(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};var Ie=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return L(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(z);function Re(t,e){if(!e)return t instanceof _e?t:new _e(De(t));if(null!=t){if(function(t){return t&&"function"==typeof t[Ee]}(t))return function(t,e){return new _e(e?function(n){var r=new Y;return r.add(e.schedule(function(){var i=t[Ee]();r.add(i.subscribe({next:function(t){r.add(e.schedule(function(){return n.next(t)}))},error:function(t){r.add(e.schedule(function(){return n.error(t)}))},complete:function(){r.add(e.schedule(function(){return n.complete()}))}}))})),r}:Ae(t))}(t,e);if(Ce(t))return function(t,e){return new _e(e?function(n){var r=new Y;return r.add(e.schedule(function(){return t.then(function(t){r.add(e.schedule(function(){n.next(t),r.add(e.schedule(function(){return n.complete()}))}))},function(t){r.add(e.schedule(function(){return n.error(t)}))})})),r}:Ne(t))}(t,e);if(Oe(t))return function(t,e){return new _e(e?function(n){var r=new Y,i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r}:ge(t))}(t,e);if(function(t){return t&&"function"==typeof t[we]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new _e(e?function(n){var r,i=new Y;return i.add(function(){r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(function(){r=t[we](),i.add(e.schedule(function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(t){return void n.error(t)}e?n.complete():(n.next(t),this.schedule())}}))})),i}:Te(t))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}function Pe(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof e?function(r){return r.pipe(Pe(function(n,r){return Re(t(n,r)).pipe(X(function(t,i){return e(n,t,r,i)}))},n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new Le(t,n))})}var Le=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new Me(t,this.project,this.concurrent))},t}(),Me=function(t){function e(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=t.call(this,e)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return L(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=new be(this,void 0,void 0);this.add(r),function(t,e,n,r,i){if(void 0===i&&(i=new be(t,n,r)),!i.closed)De(e)(i)}(this,t,e,n,r)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(Ie);function xe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ve=n(1),He=function(){function t(t){var e=this;void 0===t&&(t={}),this.checker=Math.random(),this.addMixins(),this.defaults=function(){var n=e.createId(),r=t.id?t.id:n;return{cid:n,id:r,tagName:"div",el:void 0,data:void 0,animateIn:!1,animateInTime:.5,animateOut:!1,animateOutTime:.5,hashId:"#"+r,viewClass:Yt,extendedSourcesHashMethods:{},debug:!1,template:void 0,node:document.createDocumentFragment(),name:i(e)}},this._state={},this.$dirs=Ut.createDirectionalFiltersObject(),this.addDefaultDirection=Ut.addDefaultDir,this.addDownInternalDir=Ut.addDownInternalDir,this.props=I(this.defaults(),t);var n=["id","class","dataset"];this.props.domAttributes=Ve.pick(n,this.props),this.loadEnhancers(),this.loadAllMethods(),this.props.action="LOADED",this.sink$=new R.Subject;var r=this.props.viewClass;this.view=new r(this.sink$,{},this.props.cid,this.constructor.name),this.sourceStreams=this.view.sourceStreams,this._rawSource$=this.view.getSourceStream(),this._rawSource$.viewName=this.props.name,this.sendEventsDownStream=this.sendEventsDownStreamFn,this.initViewStream(),this.checkIfElementAlreadyExists()}var e=t.prototype;return e.checkIfElementAlreadyExists=function(){Ve.propSatisfies(Ve.allPass([function(t){return document.body.contains(t)},function(t){return void 0!==t&&void 0!==t.tagName}]),"el")(this.props)&&this.postRender()},e.loadEnhancers=function(t){void 0===t&&(t=[]);var e=new ne(this,t);this.props.enhancersMap=e.getEnhancersMap(),e=void 0},e.loadAllMethods=function(){var t=this,e=Ve.curry(this.onChannelMethodCall.bind(this));this.addActionListeners().forEach(function(n){var r=n[0],i=n[1],o=n[2],s=Ve.defaultTo("LOCAL");t.props.extendedSourcesHashMethods[r]=e(i,s(o))}),this.props.hashSourceMethods=this.setSourceHashMethods(this.props.extendedSourcesHashMethods)},e.addActionListeners=function(){return[]},e.onChannelMethodCall=function(t,e,n){if(void 0!==n.$dir&&n.$dir.includes("child")&&!0!==this.deleted){var r=I({},n);r.$dir=this.$dirs.C,this.sourceStreams.raw$.next(r)}var i=this.props.enhancersMap.get(e);!1===Ve.contains(t,i)?console.warn('Spyne Warning: The method, "'+t+'", does not appear to exist in '+e+" file! "):this[t](n)},e.setSourceHashMethods=function(t){var e=this;void 0===t&&(t={});var n={DISPOSING:function(t){return e.checkParentDispose(t)},DISPOSE:function(t){return e.onDispose(t)},RENDERED:function(t){return e.onRendered(t)},RENDERED_AND_ATTACHED_TO_DOM:function(t){return e.onRendered(t)},RENDERED_AND_ATTACHED_TO_PARENT:function(t){return e.onRendered(t)},READY_FOR_GC:function(t){return e.onReadyToGC(t)},NOTHING:function(){return{}}};return I.all([{},n,t])},e.initViewStream=function(){var t=this;this._source$=this._rawSource$.pipe(X(function(e){return t.onMapViewSource(e)}),ce(this.notGCSTATE)),this.initAutoMergeSourceStreams(),this.updateSourceSubscription(this._source$,!0)},e.notGCSTATE=function(t){return!t.action.includes("READY_FOR_GC")},e.eqGCSTATE=function(t){return!t.action.includes("READY_FOR_GC")},e.notCOMPLETED=function(t){return!t.action.includes("COMPLETED")},e.notGCCOMPLETE=function(t){return!t.action.includes("GC_COMPLETE")},e.testVal=function(t){console.log("TESTING VALL IS ",t)},e.addParentStream=function(t,e){var n=this;this.parent$=t.pipe(Ft(function(t){return void 0!==t&&void 0!==t.action}),X(function(t){var e=I({},t);return"DISPOSE_AND_READY_FOR_GC"===e.action&&(n.onDispose(e),e.action="READY_FOR_GC"),e}),ce(this.notGCCOMPLETE)),this.updateSourceSubscription(this.parent$,!1,"PARENT"),this.renderAndAttachToParent(e)},e.addChildStream=function(t){var e=this,n=t.pipe(Ft(function(t){return void 0!==t&&void 0!==t.action}),function(t,e,n){return function(r){return r.lift(new le(t,e,n))}}(function(t){return e.tracer("addChildStraem do ",t)}),X(function(t){return t}),fe(function(t){return e.onChildCompleted(n.source)}));this.updateSourceSubscription(n,!0,"CHILD")},e.onChildDisposed=function(t){},e.onChildCompleted=function(t){var e=function(t){return Ve.pick(["viewName","cid"],function t(e){for(;void 0!==e.destination;)e=t(e.destination);return e}(t))}(t);return this.tracer("onChildCompleted ",this.checker,t),this.onChildDisposed(e,t),e},e.initAutoMergeSourceStreams=function(){var t=this,e={next:this.onSubscribeToSourcesNext.bind(this),error:this.onSubscribeToSourcesError.bind(this),complete:this.onSubscribeToSourcesComplete.bind(this)},n=function(){0===(r-=1)&&(t.props.el$.unmount(),t.uberSource$.complete(),t.autoSubscriber$.complete(),t.sink$.complete(),t.props=void 0,t.deleted=!0,t.tracer("completeAll",t.deleted,t.props))},r=0;this.uberSource$=new R.Subject;this.autoMergeSubject$=this.uberSource$.pipe(Pe(function(e){var i=e.observable.pipe(Ft(function(t){return void 0!==t&&void 0!==t.action}),X(function(e){var n=I({},e);return n.action=e.action,t.tracer("autoMergeSubject$",n),n}));return!1===e.autoClosesBool?i:(r+=1,i.pipe(fe(n)))})),this.autoSubscriber$=this.autoMergeSubject$.pipe(Ft(function(t){return void 0!==t&&void 0!==t.action})).subscribe(e)},e.updateSourceSubscription=function(t,e,n){void 0===e&&(e=!1);var r={observable:t,autoClosesBool:e,rel:n};this.tracer("updateSourceSubscription ",this.checker,r),this.uberSource$.next(r)},e.onSubscribeToSourcesNext=function(t){var e=this;void 0===t&&(t={});var n=Ve.defaultTo(function(t){return e.sendExtendedStreams(t)}),i=function(t,e){if(void 0!==t[e])return e;return r.compose(r.head,r.filter(r.compose(r.test(r.__,e),function(t){return new RegExp(t)})))(r.keys(t))}(this.props.hashSourceMethods,t.action);n(this.props.hashSourceMethods[i])(t),this.tracer("onSubscribeToSourcesNext",{payload:t})},e.onSubscribeToSourcesError=function(t){void 0===t&&(t=""),console.log("ALL ERROR  ",this.constructor.name,t)},e.onSubscribeToSourcesComplete=function(){this.tracer("onSubscribeToSourcesComplete","GARBAGE_COLLECT"),this.openSpigot("GARBAGE_COLLECT")},e.sendExtendedStreams=function(t){this.tracer("sendExtendedStreams",t),this.openSpigot(t.action,t)},e.renderAndAttachToParent=function(t){this.openSpigot("RENDER_AND_ATTACH_TO_PARENT",t)},e.renderView=function(){this.openSpigot("RENDER")},e.renderViewAndAttachToDom=function(t,e,n){var r={node:t,type:e,attachType:n};this.openSpigot("RENDER_AND_ATTACH_TO_DOM",{attachData:r})},e.attachChildToView=function(t){},e.checkParentDispose=function(t){"parent"===t.from$&&this.onDispose(t)},e.onBeforeDispose=function(){},e.onDispose=function(t){this.onBeforeDispose(),this.openSpigot("DISPOSE")},e.onChildDispose=function(t){},e.onParentDisposing=function(t){this.openSpigot("DISPOSE")},e.onReadyToGC=function(t){var e=void 0!==t.from$&&"internal"===t.from$;this.tracer("onReadyToGC",e,t)},e.sendEventsDownStreamFn=function(t,e){void 0===e&&(e={});var n=I({action:e},t);n.$dir=this.$dirs.C,this.sourceStreams.raw$.next(n)},e.openSpigot=function(t,e){if(void 0===e&&(e={}),void 0!==this.props){this.props.action=t;var n=Ve.merge(this.props,e);this.sink$.next(Object.freeze(n))}},e.setAttachData=function(t,e){return{node:this.props.el,type:"ViewToDomMediator",attachType:t,query:this.props.el.querySelector(e)}},e.getParentEls=function(t,e){for(var n=function(t){return t.parentElement},r=0,i=t;r<e;)i=n(i),r++;return i},e.setAttachParentData=function(t,e,n){return{node:this.getParentEls(this.props.el,n),type:"ViewToDomMediator",attachType:t,query:this.props.el.parentElement.querySelector(e)}},e.onMapViewSource=function(t){return void 0===t&&(t={}),this.props=Ve.merge(this.props,t),t},e.exchangeViewsWithChild=function(t,e){this.addChildStream(t.sourceStreams.toParent$),t.addParentStream(this.sourceStreams.toChild$,e)},e.appendToDom=function(t){this.renderViewAndAttachToDom(t,"dom","appendChild")},e.prependToDom=function(t){this.renderViewAndAttachToDom(t,"dom","prependChild")},e.appendView=function(t,e){this.exchangeViewsWithChild(t,this.setAttachData("appendChild",e))},e.appendViewToParent=function(t,e,n){void 0===n&&(n=1),this.exchangeViewsWithChild(t,this.setAttachParentData("appendChild",e,n))},e.prependViewToParent=function(t,e,n){void 0===n&&(n=1),this.exchangeViewsWithChild(t,this.setAttachParentData("prependChild",e,n))},e.prependView=function(t,e){this.exchangeViewsWithChild(t,this.setAttachData("prependChild",e))},e.appendToNull=function(){var t=document.getElementById("spyne-null-views");this.renderViewAndAttachToDom(t,"dom","appendChild")},e.onRendered=function(t){"internal"===t.from$&&this.postRender()},e.postRender=function(){this.beforeAfterRender(),this.afterRender(),this.viewsStreamBroadcaster=new ie(this.props,this.broadcastEvents)},e.beforeAfterRender=function(){this.props.el$=new ae(this.props.el)},e.downStream=function(){},e.afterRender=function(){},e.broadcastEvents=function(){return[]},e.getChannel=function(t){var e=this;return Ve.ifElse(function(t){return p().includes(t)},function(t){return window.Spyne.channels.getStream(t).observer.pipe(ce(function(t){return!0!==e.deleted}))},function(t){return console.warn("channel name "+t+" is not within "+p)})(t)},e.addChannel=function(t,e,n){var r=this;void 0===e&&(e=!1),void 0===n&&(n=!1);var i=!0===e?this.$dirs.CI:this.$dirs.I,o=Ve.path(["srcElement","isLocalEvent"]),s=Ve.path(["srcElement","cid"]),a=this.getChannel(t).pipe(X(function(t){var e=Ve.defaultTo({},Ve.clone(t));return I({$dir:i},e)}),Ft(function(t){var e=s(t);return!0!==o(t)||e===r.props.cid}));this.updateSourceSubscription(a,!1)},e.sendChannelPayload=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n="VIEWSTREAM_EVENT");var r={payload:e,action:n,srcElement:{}};r.srcElement.cid=this.props.id,r.srcElement.isLocalEvent=!1,r.srcElement.viewName=this.props.name;var i=R.Observable.of(r);return new zt(t,i,r)},e.tracer=function(){},e.isLocalEvent=function(t){return void 0!==Ve.path(["srcElement","el"],t)&&this.props.el.contains(t.srcElement.el)},e.addMixins=function(){var t=Pt();this.createId=t.createId,this.createpropsMap=t.createpropsMap,this.convertDomStringMapToObj=o,this.ifNilThenUpdate=a;var e=te();this.sendUIPayload=e.sendUIPayload,this.sendRoutePayload=e.sendRoutePayload,this.createLifeStreamPayload=e.createLifeStreamPayload},function(t,e,n){e&&xe(t.prototype,e),n&&xe(t,n)}(t,[{key:"source$",get:function(){return this._source$}}]),t}(),je=n(1),Fe=function(){function t(t,e){void 0===e&&(e=!0),this.parentViewStream=t,this.omittedMethods=["autoBinder","initAutoBinder","getEnhancerMethods","bindParentViewStream"],!0===e&&this.autoBinder()}var e=t.prototype;return e.initAutoBinder=function(){},e.getEnhancerMethods=function(){return u(this,this.omittedMethods)},e.bindParentViewStream=function(t,e){var n=this,r=function(t,r){void 0===r&&(r=!1);var i=!0===r?n.constructor:n;"function"===typeof i[t]&&function(t){e[t]=i[t].bind(e)}(t)},i=je.curryN(2,r)(je.__,!0);je.forEach(i,t.staticMethods),je.forEach(r,t.methods)},e.autoBinder=function(){var t=this.getEnhancerMethods();this.bindParentViewStream(t,this.parentViewStream)},t}();function We(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}We.prototype=Object.create(Error.prototype);var ke=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return L(e,t),e}(z);var $e=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new Ue(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i},t}(),Ue=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return L(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(z),Ge=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return L(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new Y).add(this.source.subscribe(new qe(this.getSubject(),this))),t.closed?(this._connection=null,t=Y.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return function(t){return t.lift(new $e(t))}(this)},e}(_e).prototype,Be={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:Ge._subscribe},_isComplete:{value:Ge._isComplete,writable:!0},getSubject:{value:Ge.getSubject},connect:{value:Ge.connect},refCount:{value:Ge.refCount}},qe=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return L(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(ke);var Ye=function(){function t(t,e){this.subjectFactory=t,this.selector=e}return t.prototype.call=function(t,e){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(t);return i.add(e.subscribe(r)),i},t}();function Ke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Qe=function(t){function e(e){var n;return void 0===e&&(e={}),(n=t.call(this,e)||this).props=e,n.observer$=new R.AsyncSubject,n.fetchData(),n}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.addRegisteredActions=function(){return["CHANNEL_DATA_EVENT"]},n.fetchData=function(){var t=this,e=void 0!==this.props.map?this.props.map:function(t){return t};Object(R.from)(window.fetch(this.props.dataUrl)).pipe(Pe(function(t){return Object(R.from)(t.json())}),X(e),X(function(e){return new A(t.props.name,"CHANNEL_DATA_EVENT",e)}),function(t,e){return function(n){var r;if(r="function"==typeof t?t:function(){return t},"function"==typeof e)return n.lift(new Ye(r,e));var i=Object.create(n,Be);return i.source=n,i.subjectFactory=r,i}}(this.observer$)).connect()},function(t,e,n){e&&Ke(t.prototype,e),n&&Ke(t,n)}(e,[{key:"observer",get:function(){return this.observer$}}]),e}(rt);n.d(e,"SpyneApp",function(){return ze}),n.d(e,"ViewToDomMediator",function(){return Yt}),n.d(e,"ChannelsBase",function(){return rt}),n.d(e,"ChannelsBaseData",function(){return Qe}),n.d(e,"ChannelsBaseController",function(){return Rt}),n.d(e,"ChannelsPayload",function(){return zt}),n.d(e,"ChannelStreamItem",function(){return A}),n.d(e,"DomItem",function(){return Ht}),n.d(e,"ViewStream",function(){return He}),n.d(e,"ViewStreamBroadcaster",function(){return ie}),n.d(e,"SpyneTrait",function(){return Fe});var ze=function(){function t(t){var e=this;void 0===t&&(t={}),this.channels=new Rt,this.VERSION="0.8.23",this.ViewStream=He,this.BasicView=Yt,this.DomItem=Ht,this.ViewStreamBroadcaster=ie,this.ChannelsPayload=zt,this.ChannelsBaseController=Rt,this.ChannelsBase=rt,this.ChannelStreamItem=A,window.Spyne=this;void 0!==t&&(window.Spyne.config=I({channels:{WINDOW:{mediqQueries:{},events:[],listenForResize:!0,listenForOrientation:!0,listenForScroll:!0,listenForMouseWheel:!1,debounceMSTimeForResize:200,debounceMSTimeForScroll:150},ROUTE:{type:"slash",isHash:!1,isHidden:!1,routes:{route:{keyword:"change"}}}}},t)),this.getChannelActions=function(t){return window.Spyne.channels.getChannelActions(t)},this.registerChannel=function(t,n){return e.channels.registerStream(t,n)},this.registerDataChannel=function(t){return e.channels.registerStream(t.props.name,t)};var n=new He({id:"spyne-null-views"});n.appendToDom(document.body),n.props.el.style.cssText="display:none; opacity:0; pointer-events:none;",this.channels.init()}return t.getChannelActions=function(t){return window.Spyne.channels.getChannelActions(t)},t.registerChannel=function(t,e){if(void 0!==window.Spyne)return window.Spyne.channels.registerStream(t,e);console.warn("Spyne has not been initialized")},t}();window.Spyne=ze},function(t,e){t.exports=o;var n=Object.create,r=function(){throw new Error("Not implemented.")},i=function(){return this};function o(){}function s(t){this.value=t}function a(t){this.value=t}s.prototype=n(o.prototype),a.prototype=n(o.prototype),o.Failure=function(t){return new s(t)},o.prototype.Failure=o.Failure,o.Success=function(t){return new a(t)},o.prototype.Success=o.Success,o.fromNullable=function(t){return null!=t?new a(t):new s(t)},o.prototype.fromNullable=o.fromNullable,o.fromEither=function(t){return t.fold(o.Failure,o.Success)},o.prototype.isFailure=!1,s.prototype.isFailure=!0,o.prototype.isSuccess=!1,a.prototype.isSuccess=!0,o.of=function(t){return new a(t)},o.prototype.of=o.of,o.prototype.ap=r,s.prototype.ap=function(t){return t.isFailure?this.Failure(this.value.concat(t.value)):this},a.prototype.ap=function(t){return t.isFailure?t:t.map(this.value)},o.prototype.map=r,s.prototype.map=i,a.prototype.map=function(t){return this.of(t(this.value))},o.prototype.toString=r,s.prototype.toString=function(){return"Validation.Failure("+this.value+")"},a.prototype.toString=function(){return"Validation.Success("+this.value+")"},o.prototype.isEqual=r,s.prototype.isEqual=function(t){return t.isFailure&&t.value===this.value},a.prototype.isEqual=function(t){return t.isSuccess&&t.value===this.value},o.prototype.get=r,s.prototype.get=function(){throw new TypeError("Can't extract the value of a Failure(a).")},a.prototype.get=function(){return this.value},o.prototype.getOrElse=r,s.prototype.getOrElse=function(t){return t},a.prototype.getOrElse=function(t){return this.value},o.prototype.orElse=r,a.prototype.orElse=i,s.prototype.orElse=function(t){return t(this.value)},o.prototype.merge=function(){return this.value},o.prototype.fold=r,s.prototype.fold=function(t,e){return t(this.value)},a.prototype.fold=function(t,e){return e(this.value)},o.prototype.cata=r,s.prototype.cata=function(t){return t.Failure(this.value)},a.prototype.cata=function(t){return t.Success(this.value)},o.prototype.swap=r,s.prototype.swap=function(){return this.Success(this.value)},a.prototype.swap=function(){return this.Failure(this.value)},o.prototype.bimap=r,s.prototype.bimap=function(t,e){return this.Failure(t(this.value))},a.prototype.bimap=function(t,e){return this.Success(e(this.value))},o.prototype.failureMap=r,a.prototype.failureMap=i,s.prototype.failureMap=function(t){return this.Failure(t(this.value))},o.prototype.leftMap=o.prototype.failureMap,a.prototype.leftMap=a.prototype.failureMap,s.prototype.leftMap=s.prototype.failureMap}])});